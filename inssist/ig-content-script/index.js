!function(){function n(n){const e=document.createElement("script");e.textContent=n.replace("<script>","(function () {").replace("<\/script>","})()"),document.documentElement.insertAdjacentElement("afterbegin",e),e.remove()}var e={createName:function(n,e){return`${n}|${JSON.stringify(e)}`},getName:t,getParams:function(){return function(n){try{return JSON.parse(n)}catch(n){return null}}(window.self.name.split("|")[1])||{}},isIframe:function(n=null){return window.self!==parent&&(!n||t()===n)}};function t(){return window.self.name.split("|")[0]||null}function r(n,e={}){const t=Math.random().toString().slice(2),r=document.createElement("script");r.onload=()=>r.remove(),r.src=chrome.runtime.getURL(`${n}?v=${t}`),document.documentElement.insertAdjacentElement("afterbegin",r);for(const n in e)r.setAttribute(n,e[n])}var o={init:function(){n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n\n\n      ;(function main () {\n        patchMessageRendering()\n      })()\n\n\n      function patchMessageRendering () {\n        modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n          // detect that this is a message rendering module\n          if (!bodyStr.includes('UNSUPPORTED_MESSAGE_TYPE_TO_TITLE[')) { return }\n\n          // instagram has 3 bundle versions:\n          //   1) [old] e.default = function({ ..., item: E, ... }) {\n          //   2) [old] e.default = function(t) {\n          //   3) [new] e[\"default\"] = a\n          let messageIdGetterStr\n          if (bodyStr.includes('default=function({')) {\n            const itemPropName = bodyStr\n              .split('function({')[1]\n              .split('}')[0]\n              .split('item:')[1]\n              .split(',')[0]\n            messageIdGetterStr = itemPropName + '.id'\n          } else if (bodyStr.includes('default=function(')) {\n            const propsName = bodyStr\n              .split('function(')[1]\n              .split(')')[0]\n            messageIdGetterStr = propsName + '.item.id'\n          } else if (bodyStr.includes('[\"default\"]=')) {\n            const propsName = bodyStr\n              .split('function')[1]\n              .split('(')[1]\n              .split(')')[0]\n            bodyStr = bodyStr.replace('{', '{ var __props__ = ' + propsName + ';')\n            messageIdGetterStr = '__props__.item.id'\n          }\n\n          // pass \"id\" to Instagram's \"Box\" component\n          //   (only for unsupported message types)\n          const newBodyStr = bodyStr.replace(\n            'direction:\"column\"',\n            'direction: \"column\", id: \"message-\" + ' + messageIdGetterStr\n          )\n\n          setBodyStr(newBodyStr)\n        })\n      }\n    <\/script>\n  ")}};var i={init:function(){n("\n    <script>\n      const moduleInterceptor = window.inssist.moduleInterceptor\n\n\n      moduleInterceptor.registerReduxAction(\n        'inssist.dm.apply-filters',\n        (state, action) => {\n          return {\n            ...state,\n            direct: {\n              ...state.direct,\n              filters: {\n                ...(state.direct.filters || {\n                  string: '',\n                  unread: false,\n                  flagged: false,\n                }),\n                ...('string' in action) && {\n                  string: action.string,\n                },\n                ...('unread' in action) && {\n                  unread: action.unread,\n                },\n                ...('flagged' in action) && {\n                  flagged: action.flagged,\n                },\n              },\n            },\n          }\n        },\n      )\n    <\/script>\n  "),n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n      modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        const isThreadsNormalizer = (\n          bodyStr.includes('last_permanent_item') &&\n          bodyStr.includes('processStrategy')\n        )\n        if (!isThreadsNormalizer) { return }\n\n        const moduleVarMatch =\n          // for old instagram bundle version\n          bodyStr.match(/(\\w+)\\.default=/) ||\n          // for new instagram bundle version\n          bodyStr.match(/(\\w+)\\[\\\"default\\\"\\]=/)\n        if (!moduleVarMatch) {\n          console.error('failed to intercept threads normalizer')\n          return\n        }\n\n        const moduleVar = moduleVarMatch[1]\n        setBodyStr(\n         bodyStr +\n         ';window.inssist.moduleInterceptor.registerModule(\"dm-threads-normalizer\",' +\n         moduleVar +\n         '.default)'\n        )\n      })\n    <\/script>\n  "),n("\n    <script>\n      // require \"store\" and \"dm-state-proxy\" modules\n      let store\n      let stateProxy\n      const interval = setInterval(() => {\n        if (!window.ig) { return }\n        setTimeout(() => clearInterval(interval))\n        ;(async () => {\n          store = await window.ig.require('store')\n          stateProxy = await window.ig.require('dm-state-proxy')\n        })()\n      }, 100)\n\n\n      const _createSelector_ = Symbol('createSelector')\n      Object.defineProperty(Object.prototype, 'createSelector', {\n        get () {\n          return this[_createSelector_]\n        },\n        set (createSelector) {\n          this[_createSelector_] = (...args) => {\n            const isThreadsSelector = (\n              args[2] &&\n              (\n                // null==s||s===t.folder\n                /null==\\w\\|\\|\\w===\\w\\.folder/.test(args[2].toString()) ||\n                // b==null||b===a.folder\n                /\\w==null\\|\\|\\w===\\w\\.folder/.test(args[2].toString())\n              )\n            )\n            if (!isThreadsSelector) {\n              return createSelector(...args)\n            }\n\n            args[0] = (s) => ([\n              s.direct.threads.filter(t => !t.pending),\n              s.direct.filters,\n            ])\n            args[2] = ([threads, filters], folder) => {\n              let state = null\n              let users = {}\n              if (store && stateProxy) {\n                state = store.getState()\n                users = state.direct.users.toJS()\n              }\n\n              return threads.filter(thread => {\n                // check folder\n                const folderOk = (\n                  typeof folder !== 'number' ||\n                  thread.folder === folder\n                )\n                if (!folderOk) { return false }\n\n                // don't apply filters if store and\n                //   state proxy are not initialized yet\n                if (!state) { return true }\n\n                // no filters in state yet? => use default values\n                if (!filters) {\n                  filters = {\n                    string: '',\n                    unread: false,\n                    flagged: false,\n                  }\n                }\n\n                // check filter string\n                const inviter = users[thread.inviter] || null\n                const filterString = (filters.string || '').toLowerCase()\n                const title = thread.thread_title || (inviter && inviter.username) || ''\n                const filterStringOk = title.toLowerCase().includes(filterString)\n                if (!filterStringOk) { return false }\n\n                // check filter unread\n                const filterUnread = filters.unread || false\n                const seen = stateProxy.getThreadSeenByViewer(state, thread.id)\n                if (filterUnread && seen) { return false }\n\n                // check filter flagged\n                const filterFlagged = filters.flagged || false\n                const flagged = thread.thread_label === 1\n                if (filterFlagged && !flagged) { return false }\n\n                return true\n              })\n            }\n\n            return createSelector(...args)\n          }\n\n          return true\n        },\n      })\n    <\/script>\n  ")}};var s={init:function(){o.init(),i.init()}};var a={init:function(){(function(){if(!(window.opener&&"reels.auth-window"===window.name||sessionStorage.isReelsAuthWindow))return;sessionStorage.isReelsAuthWindow=!0,n("\n    <script>\n      setInterval(async () => {\n        const loggedIn = !!(\n          document.querySelector('.logged-in') ||\n          document.querySelector('.BaseView')\n        )\n        if (!loggedIn) { return }\n        // a tricky way to notify inssist about auth result\n        document.cookie = 'reels.auth-result-cookie=1'\n        window.close()\n      }, 50)\n    <\/script>\n  ")})(),n("\n    <script>\n      window.inssist.modulePatcher.onModuleInit((bodyStr, setBodyStr, moduleName) => {\n        if (moduleName !== 'gkx') return\n        const newBodyStr = bodyStr.replace(\n          /(return \\w.result)/,\n          'if (arguments[0] === \"4798\") return true; $1'\n        )\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  ")}};var c=document.documentElement,d=function(){n(`\n      <script>\n        window.inssist.theme.emojiRegex = ${window.emojiRegex.toString()}\n      <\/script>\n    `)},l=function(){!function(){const n=e.getParams().theme;if(!n)return;c.classList.add(`theme-${n}`)}(),c.insertAdjacentHTML("afterbegin",'\n    <svg id="theme-night-svg" style="display: none; height: 0px; width: 0px;">\n      <filter id="theme-filter" x="0" y="0" width="99999" height="99999" style="color-interpolation-filters: srgb;">\n        <feColorMatrix type="matrix" values="0.300 -0.600 -0.600 0.000 0.950 -0.600 0.300 -0.600 0.000 0.950 -0.600 -0.600 0.300 0.000 0.950 0.000 0.000 0.000 1.000 0.000"></feColorMatrix>\n      </filter>\n      <filter id="theme-reverse-filter" x="0" y="0" width="99999" height="99999" style="color-interpolation-filters: srgb;">\n        <feColorMatrix type="matrix" values="0.333 -0.667 -0.667 0.000 1.015 -0.667 0.333 -0.667 0.000 1.015 -0.667 -0.667 0.333 0.000 1.015 0.000 0.000 0.000 1.000 0.000"></feColorMatrix>\n      </filter>\n    </svg>\n  '),c.insertAdjacentHTML("afterbegin",'\n    <style>\n      .theme-night {\n        filter: url(#theme-filter) !important;\n        text-shadow: 0 0 0 !important;\n        background: #191919 !important;\n      }\n\n      .theme-night ._cqw45._2pnef,\n      .theme-night ._mli86,\n      .theme-night :not(object):not(body)>embed,\n      .theme-night [background],\n      .theme-night [style*="background-image: url"],\n      .theme-night [style*="background-image:url"],\n      .theme-night [style*="background: url"],\n      .theme-night [style*="background:url"],\n      .theme-night img,\n      .theme-night object,\n      .theme-night svg image,\n      .theme-night video {\n        -webkit-filter: url(#theme-reverse-filter) !important;\n        filter: url(#theme-reverse-filter) !important;\n      }\n\n      .theme-night [background] *,\n      .theme-night [style*="background-image: url"] *,\n      .theme-night [style*="background-image:url"] *,\n      .theme-night [style*="background: url"] *,\n      .theme-night [style*="background:url"] *,\n      .theme-night img[src^="https://s0.wp.com/latex.php"],\n      .theme-night input .NaturalImage-image {\n        -webkit-filter: none !important;\n        filter: none !important;\n      }\n\n      .theme-night :-webkit-full-screen,\n      .theme-night :-webkit-full-screen * {\n        -webkit-filter: none !important;\n        filter: none !important;\n      }\n\n      .theme-night :-moz-full-screen,\n      .theme-night :-moz-full-screen * {\n        -webkit-filter: none !important;\n        filter: none !important;\n      }\n\n      .theme-night :fullscreen,\n      .theme-night :fullscreen * {\n        -webkit-filter: none !important;\n        filter: none !important;\n      }\n    </style>\n  '),d()};var u={init:function(){n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n\n\n      ;(function main () {\n        patchHasResultsProp()\n      })()\n\n\n      function patchHasResultsProp () {\n        const regexp = /hasResults:(\\w+\\.search\\.results\\.length>0)/\n        modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n          const match = bodyStr.match(regexp)\n          if (!match || !match[1]) { return }\n          setBodyStr(bodyStr.replace(match[1], 'false'))\n        })\n      }\n    <\/script>\n  ")}};var p={init:function(){u.init(),n("\n    <script>\n      Object.defineProperty(Object.prototype, 'FEED_MAXIMUM_VIDEO_DURATION', {\n        get: () => 60 * 60,\n        set: () => true,\n      })\n    <\/script>\n  "),n("\n    <script>\n      const moduleInterceptor = window.inssist.moduleInterceptor\n      moduleInterceptor.registerReduxAction(\n        'inssist.ig.stop-creation-session',\n        (state, action) => {\n          return {\n            ...state,\n            creation: {\n              ...state.creation,\n              sessionId: null,\n              sourceImage: null,\n              sourceVideo: null,\n            },\n            storyCreation: {\n              ...state.storyCreation,\n              sessionId: null,\n              sourceImage: null,\n              sourceVideo: null,\n            },\n          }\n        },\n      )\n    <\/script>\n  ")}};var f={init:function(){(function(){if(Array.prototype.flat)return;Array.prototype.flat=function(){const n=[...this],e=[];for(const t of n)Array.isArray(t)?e.push(...t):e.push(t);return e}})(),String.prototype.replaceAll||(String.prototype.replaceAll=function(n,e){return this.split(n).join(e)})}};var m={init:function(){n("\n    <script>\n      window.storyMentionsContentScript = {}\n    <\/script>\n  "),n("\n    <script>\n      Object.assign(window.storyMentionsContentScript, {\n        onStoryCreationReduce,\n      })\n\n\n      ;(function main () {\n        interceptStoryCreationReducer()\n      })()\n\n\n      const interceptors = []\n\n\n      function onStoryCreationReduce (fn) {\n        interceptors.push(fn)\n      }\n\n\n      function interceptStoryCreationReducer () {\n        const _storyCreationReducer_ = Symbol('storyCreationReducer')\n        Object.defineProperty(Object.prototype, 'storyCreationReducer', {\n          get () {\n            return (...args) => {\n              // call all interceptors\n              const storyCreationState = args[0]\n              const action = args[1]\n              interceptors.forEach(fn => {\n                fn(action, storyCreationState)\n              })\n\n              // call original function\n              return this[_storyCreationReducer_](...args)\n            }\n          },\n          set (value) {\n            this[_storyCreationReducer_] = value\n            return true\n          },\n        })\n      }\n    <\/script>\n  ")}};var g=[".XrOey:nth-child(3)",".PolarisDesktopNav._acut:nth-child(3)"],y={init:function(){n("\n    <script>\n      Object.defineProperty(Object.prototype, 'hasFeedCreation', {\n        get: () => () => true,\n        set: () => true,\n      })\n\n      Object.defineProperty(Object.prototype, 'hasFeedCreationV2', {\n        get: () => () => true,\n        set: () => true,\n      })\n    <\/script>\n  "),document.documentElement.insertAdjacentHTML("afterbegin",`\n    <style>\n      ${g} {\n        order: -1;\n        margin-right: 22px;\n        display: none;\n      }\n    </style>\n  `),n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n      modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        if (!bodyStr.includes('MAX_RETRY_IN_MS')) { return }\n        const newBodyStr = bodyStr\n          // old instagram bundle contains \"currentRetryInMs:2*e\"\n          .replace(/currentRetryInMs:\\d\\*\\w/g, 'currentRetryInMs:2500')\n          // new instagram bundle contains \"currentRetryInMs:e*2\"\n          .replace(/currentRetryInMs:\\w\\*\\d/g, 'currentRetryInMs:2500')\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  ")}};var h={on:function(n,e){v();(w[n]||(w[n]=[])).push(e)},off:function(n,e){const t=w[n];if(!t)return;for(;;){const n=t.findIndex((n=>n===e));if(-1===n)break;t.splice(n,1)}},send:function(n,...e){let t;const r=e[e.length-1];"function"==typeof r?(t=r,e=e.slice(0,-1)):t=null;return new Promise((r=>{chrome.runtime.sendMessage({[b]:n,[_]:e},(n=>{chrome.runtime.lastError||n!==S&&(t&&t(n),r(n))}))}))}};const S="__chromeBus.EMPTY_RESPONSE",w={},b="__chromeBus.name",_="__chromeBus.args";function v(){const n=v;n.init||(n.init=!0,chrome.runtime.onMessage.addListener(((n,e,t)=>{const r=n["__chromeBus.name"];if(!r)return!1;const o=n["__chromeBus.args"]||[],i=w[r]||[];return 0===i.length?(t(S),!0):((async()=>{const n=await Promise.all(i.map((n=>n(...o)))),e=n[n.length-1];t(e)})(),!!t)})))}var I={init:function(){!function(){if(!(window.opener&&"desktop-reels.auth-window"===window.name||sessionStorage.isReelsAuthWindow))return;sessionStorage.isReelsAuthWindow=!0,n("\n    <script>\n      setInterval(async () => {\n        const loggedIn = !!document.querySelector('.logged-in')\n        if (!loggedIn) { return }\n        window.close()\n      }, 50)\n    <\/script>\n  ")}()}};var P={init:function(){(async function(){const e=await h.send("desktop-reels.get-initial-data");n(`\n    <script>\n      window.inssist.desktopReelsData = ${JSON.stringify(e)};\n    <\/script>\n  `)})(),I.init()}};var O={init:function(){n("\n    <script>\n      window.inssist.modulePatcher = {\n        onModuleInit,\n      }\n\n\n      const fns = []\n\n\n      function onModuleInit (fn) {\n        fns.push(fn)\n      }\n\n\n      // patch __d function so we can modify modules body\n      const _d_ = Symbol('d')\n      Object.defineProperty(Object.prototype, '__d', {\n        get () {\n          const __d = this[_d_]\n          return (...args) => {\n            // __d(moduleFn, moduleId, dependencyIds)\n            const isOldBundleVersion =\n              typeof args[0] === 'function' &&\n              typeof args[1] === 'number' &&\n              Array.isArray(args[2])\n\n            // __d(moduleName, dependencyNames, moduleFn)\n            const isNewBundleVersion =\n              typeof args[0] === 'string' &&\n              Array.isArray(args[1]) &&\n              typeof args[2] === 'function'\n\n            window.inssist.igBundleVersion =\n              isOldBundleVersion ? 'v1' :\n              isNewBundleVersion ? 'v2' : null\n\n            if (!isOldBundleVersion && !isNewBundleVersion) {\n              return __d(...args)\n            }\n\n            const fn = isOldBundleVersion ? args[0] : args[2]\n            const fnStr = fn.toString()\n            const argsStr = fnStr.split('(')[1].split(')')[0]\n            const bodyStartIndex = fnStr.indexOf('{')\n            const bodyEndIndex = fnStr.lastIndexOf('}')\n\n            let bodyStr = fnStr.slice(bodyStartIndex + 1, bodyEndIndex)\n            const setBodyStr = (newBodyStr) => {\n              bodyStr = newBodyStr\n              const newFn = new Function(argsStr, bodyStr)\n              if (isOldBundleVersion) {\n                args[0] = newFn\n              } else {\n                args[2] = newFn\n              }\n            }\n\n            fns.forEach(fn => {\n              try {\n                if (isOldBundleVersion) {\n                  fn(bodyStr, setBodyStr)\n                } else {\n                  const moduleName = args[0]\n                  fn(bodyStr, setBodyStr, moduleName)\n                }\n              } catch (e) {\n                console.error('failed to patch module', { e, fn, args })\n              }\n            })\n\n            return __d(...args)\n          }\n        },\n        set (value) {\n          this[_d_] = value\n          return true\n        },\n      })\n    <\/script>\n  ")}};var j={init:function(){n("\n    <script>\n      const inssist = window.inssist\n      inssist.moduleInterceptor = {\n        getModule,\n        registerModule,\n        registerReduxAction,\n      }\n\n\n      let store\n      const modules = {}\n      const customReduxReducers = []\n      const dispatchListeners = []\n\n\n      function getModule (moduleName) {\n        return modules[moduleName]\n      }\n\n\n      function registerModule (moduleName, module) {\n        if (modules[moduleName]) { return }\n        modules[moduleName] = module\n      }\n\n\n      function registerReduxAction (actionType, reducer) {\n        customReduxReducers.push({ actionType, fn: reducer })\n      }\n\n\n      // add-dispatch-listener\n      registerModule('add-dispatch-listener', (fn) => {\n        dispatchListeners.push(fn)\n      })\n\n\n      // nav\n      // for new bundle version (v2)\n      registerModule('nav', {\n        push (url) {\n          const router = window.require('currentCometRouterInstance')\n          return router.get().dispatcher.go(url)\n        },\n      })\n      // for old bundle version (v1)\n      const _createHref_ = Symbol('createHref')\n      Object.defineProperty(Object.prototype, 'createHref', {\n        get () {\n          return this[_createHref_]\n        },\n        set (value) {\n          delete modules.nav\n          registerModule('nav', this)\n          this[_createHref_] = value\n          return true\n        }\n      })\n\n      // nav-interceptor (used only for v2)\n      //   usage: navInterceptor.beforeGo(prevent, ...args)\n      inssist._beforeGoFns = []\n      inssist._navInterceptorReady = false\n      registerModule('nav-interceptor', {\n        beforeGo (fn) {\n          inssist._beforeGoFns.push(fn)\n        },\n      })\n      inssist.modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        if (!bodyStr.includes('._instances')) return\n        if (inssist._navInterceptorReady) return\n        inssist._navInterceptorReady = true\n\n        // patch this code: \"...go:function(a,c){return b(a,null,c)}...\" =>\n        //   \"...go:function(a,c){ <OUR_CODE_HERE>; return b(a,null,c)}...\"\n        const parts = bodyStr.split('go:function')\n        const start = parts[0] + 'go:function' // ...go:function\n        const mid = parts[1].split('{')[0] + '{' // (a,c){\n        const end = parts[1].split('{').slice(1).join('{') // return b(a, null, c)}...\n        const interception =\n          'let args = [...arguments];' +\n          'let prevented = false;' +\n          'let prevent = () => { prevented = true };' +\n          'window.inssist._beforeGoFns.forEach(f => f(prevent, ...args));' +\n          'if (prevented) return;'\n        setBodyStr(start + mid + interception + end)\n      })\n\n      // http\n      const _AjaxError_ = Symbol('AjaxError')\n      Object.defineProperty(Object.prototype, 'AjaxError', {\n        get () {\n          return this[_AjaxError_]\n        },\n        set (value) {\n          registerModule('http', this)\n          this[_AjaxError_] = value\n          return true\n        }\n      })\n\n\n      // store\n      const _createStore_ = Symbol('createStore')\n      Object.defineProperty(Object.prototype, 'createStore', {\n        get () {\n          return this[_createStore_]\n        },\n        set (createStore) {\n          this[_createStore_] = (reducer, middleware) => {\n            store = createStore((state, action) => {\n              dispatchListeners.forEach(fn => fn(action))\n              const customReducer = customReduxReducers\n                .find(r => r.actionType === action.type)\n              if (customReducer) {\n                return customReducer.fn(state, action)\n              }\n              return reducer(state, action)\n            }, middleware)\n            registerModule('store', store)\n            return store\n          }\n          return true\n        }\n      })\n\n\n      // config\n      const _needsToConfirmCookies_ = Symbol('needsToConfirmCookies')\n      Object.defineProperty(Object.prototype, 'needsToConfirmCookies', {\n        get () {\n          return this[_needsToConfirmCookies_]\n        },\n        set (value) {\n          registerModule('config', this)\n          this[_needsToConfirmCookies_] = value\n          return true\n        }\n      })\n\n\n      // cookies-controller\n      const _getCookie_ = Symbol('getCookie')\n      Object.defineProperty(Object.prototype, 'getCookie', {\n        get () {\n          return this[_getCookie_]\n        },\n        set (getCookie) {\n          registerModule('cookies-controller', this)\n          this[_getCookie_] = (...args) => {\n            const result = getCookie.call(this, ...args)\n\n            // sometimes \"ds_user_id\" is not readable by iframe, idkw.\n            //   to fix this case we try to return \"viewerId\" value of the user state\n            if (args.length === 1 && args[0] === 'ds_user_id' && !result) {\n              let viewerId\n              if (store) {\n                const state = store.getState()\n                viewerId = state && state.users && state.users.viewerId\n              }\n\n              // fallback to any non-empty string to prevent\n              //   isUserLoggedIn function returning false when user is logged in\n              if (!viewerId) {\n                return 'ds_user_id'\n              }\n\n              return viewerId\n            }\n\n            return result\n          }\n          return true\n        }\n      })\n\n\n      // scroll-controller\n      const _saveScrollPosition_ = Symbol('saveScrollPosition')\n      Object.defineProperty(Object.prototype, 'saveScrollPosition', {\n        get () {\n          return this[_saveScrollPosition_]\n        },\n        set (value) {\n          registerModule('scroll-controller', this)\n          this[_saveScrollPosition_] = value\n          return true\n        }\n      })\n\n\n      // constants\n      const _appleAppStoreAppId_ = Symbol('appleAppStoreAppId')\n      Object.defineProperty(Object.prototype, 'appleAppStoreAppId', {\n        get () {\n          return this[_appleAppStoreAppId_]\n        },\n        set (value) {\n          registerModule('constants', this)\n          this[_appleAppStoreAppId_] = value\n          return true\n        },\n      })\n\n\n      // gatekeeper\n      const _getGatekeepers_ = Symbol('getGatekeepers')\n      Object.defineProperty(Object.prototype, 'getGatekeepers', {\n        get () {\n          return this[_getGatekeepers_]\n        },\n        set (value) {\n          registerModule('gatekeeper', this)\n          this[_getGatekeepers_] = value\n          return true\n        },\n      })\n\n\n      // api\n      const _nominateClipsMedia_ = Symbol('nominateClipsMedia')\n      Object.defineProperty(Object.prototype, 'nominateClipsMedia', {\n        get () {\n          return this[_nominateClipsMedia_]\n        },\n        set (value) {\n          registerModule('api', this)\n          this[_nominateClipsMedia_] = value\n          return true\n        },\n      })\n\n\n      // dm-conversation-creator\n      const _filteredCandidates_ = Symbol('filteredCandidates')\n      Object.defineProperty(Object.prototype, 'filteredCandidates', {\n        get () {\n          if ('forwardAction' in this) {\n            registerModule('dm-conversation-creator', this)\n          }\n          return this[_filteredCandidates_]\n        },\n        set (value) {\n          this[_filteredCandidates_] = value\n          return true\n        }\n      })\n\n\n      // dm-delta-parser\n      const _parseDeltaItem_ = Symbol('parseDeltaItem')\n      Object.defineProperty(Object.prototype, 'parseDeltaItem', {\n        get () {\n          return this[_parseDeltaItem_]\n        },\n        set (value) {\n          registerModule('dm-delta-parser', this)\n          this[_parseDeltaItem_] = value\n          return true\n        }\n      })\n\n\n      // dm-thread-actions\n      const _markSeen_ = Symbol('markSeen')\n      Object.defineProperty(Object.prototype, 'markSeen', {\n        get () {\n          return this[_markSeen_]\n        },\n        set (value) {\n          registerModule('dm-thread-actions', this)\n          this[_markSeen_] = value\n          return true\n        }\n      })\n\n\n      // dm-state-proxy\n      const _getThreadSeenByViewer_ = Symbol('getThreadSeenByViewer')\n      Object.defineProperty(Object.prototype, 'getThreadSeenByViewer', {\n        get () {\n          return this[_getThreadSeenByViewer_]\n        },\n        set (value) {\n          registerModule('dm-state-proxy', this)\n          this[_getThreadSeenByViewer_] = value\n          return true\n        }\n      })\n    <\/script>\n  ")}};var M={init:function(){n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n      modulePatcher.onModuleInit((bodyStr, setBodyStr, moduleName) => {\n        // moduleName is only present for the new instagram bundle\n        if (!moduleName) return\n\n        if (!bodyStr.includes('className:')) return\n\n        // generate class name\n        const className = moduleName\n          .replace('.react', '')\n          .split('.').join('_')\n\n        // add generated class name to className field\n        const newBodyStr = bodyStr.replace(\n          /className:([\"a-z][^?]{20})/g,\n          'className:\"' + className + ' \"+$1'\n        )\n\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  ")}};const k='!function(){const e=window.inssist.url;let t=!1;function o(){if(t)throw new Error("Invalid Instagram response")}Object.defineProperties(window.navigator,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},userAgent:{value:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1"},appVersion:{value:"5.0 (iPhone; CPU iPhone OS 14_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1"},platform:{value:"iPhone"},product:{value:"Gecko"},vendor:{value:"Apple Computer, Inc."},vendorSub:{value:""},webdriver:{value:!1},productSub:{value:"20030107"}}),Object.defineProperty(screen.orientation,"type",{value:null}),window.addEventListener("DOMContentLoaded",()=>{document.body.requestFullscreen=(()=>{})}),navigator.serviceWorker.getRegistrations().then(e=>{e&&0!==e.length&&e.forEach(e=>e.unregister())}),function(){let e,t,i,n;const r=document.createElement.bind(document);document.createElement=((...e)=>{const t=r(...e);return"video"===e[0]&&t.setAttribute("type","video/mp4"),t}),Object.defineProperty(Object.prototype,"logIgLiteAction",{get:()=>(o(),function(e){const t=e&&e.event_name;if(t&&t.startsWith("invalid_media")){const e={invalid_media_duration_too_short:"Uploading video cancelled. Please ensure that the video is at least 3 seconds long.",invalid_media_duration_too_long:"Uploading video cancelled. Please ensure that the video is at max 60 seconds long.",invalid_media_aspect_ratio_not_supported:"Uploading video cancelled. Unsupported ratio."}[t]||"Uploading video cancelled. Server returned "+t+"error.";"invalid_media_duration_too_long"!==t&&alert(e),window.ig.onMediaProcessingError(t)}}),set:()=>!0}),Object.defineProperty(Object.prototype,"creationSelectMedia",{get:()=>(o(),o=>i=>{window.ig.onBeforePostCreation();const n=o.type.split("/")[0];"image"===n?i(e(o)):"video"===n&&i(t(o))}),set:()=>!0}),Object.defineProperty(Object.prototype,"storyCreationSelectMedia",{get:()=>(o(),e=>t=>{window.ig.onBeforeStoryCreation();const o=e.type.split("/")[0];"image"===o?t(i(e)):"video"===o&&t(n(e))}),set:()=>!0}),Object.defineProperty(Object.prototype,"creationSelectImage",{get:()=>(o(),e),set:t=>(e=t,!0)}),Object.defineProperty(Object.prototype,"creationSelectVideo",{get:()=>(o(),t),set:e=>(t=e,!0)}),Object.defineProperty(Object.prototype,"storyCreationSelectImage",{get:()=>(o(),i),set:e=>(i=e,!0)}),Object.defineProperty(Object.prototype,"storyCreationSelectVideo",{get:()=>(o(),n),set:e=>(n=e,!0)}),Object.defineProperty(Object.prototype,"isMP4Video",{get:()=>(o(),()=>!0),set:()=>!0})}(),Object.defineProperty(Object.prototype,"resolution",{get(){return o(),this.$resolution?this.$resolution:this.imageWidth&&this.imageHeight?Math.min(Math.max(this.imageWidth,this.imageHeight),4e3):void 0},set(e){return this.$resolution=e,!0}}),function(){const o=()=>{t=!0,parent.postMessage({name:"ig-patch-corrupted"},"*")};fetch(e+"manifest.json").then(e=>e.text()).then(e=>{e.includes("INSSIST")&&e.includes("*://*.inssist.com/*")&&e.includes("/inssist.html?popup")||o()}).catch(()=>{o()})}()}();';function B(){n(`\n    <script>\n      window.inssist = {\n        url: '${chrome.runtime.getURL("/")}',\n        theme: {},\n        igStore: null,\n        gatekeeper: {},\n        modulePatcher: null,\n        moduleInterceptor: null,\n        desktopReelsData: {},\n        igBundleVersion: null,\n      }\n    <\/script>\n  `)}function C(){document.documentElement.insertAdjacentHTML("afterbegin",'\n    <link\n      href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700|Nunito+Sans&display=fallback&subset=cyrillic,cyrillic-ext,latin-ext,vietnamese"\n      rel="stylesheet"/>\n  ')}function R(){n("\n    <script>\n      if (window.trustedTypes) {\n        trustedTypes.createPolicy('default', {\n          createHTML: html => html,\n          createScript: fnBodyStr => fnBodyStr,\n          createScriptURL: url => url,\n        })\n      }\n    <\/script>\n  ")}function x(){n("\n    <script>\n      window.inssist.modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        if (!bodyStr.includes('touches[0].target.className===')) { return }\n        const newBodyStr = bodyStr.replace(\n          /touches\\[0\\]\\.target\\.className===(\"\\w+\")/,\n          'touches[0].target.classList.contains($1)'\n        )\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  ")}function A(){n("\n    <script>\n      const error0 = console.error.bind(console)\n      console.error = (...args) => {\n        if (\n          typeof args[0] === 'string' &&\n          args[0].startsWith('ErrorUtils')\n        ) { return }\n        return error0(...args)\n      }\n    <\/script>\n  ")}function E(){n("\n    <script>\n      const addEventListener0 = window.addEventListener.bind(window)\n      window.addEventListener = (...args) => {\n        if (args[0]?.toLowerCase?.() === 'unhandledrejection') { return }\n        return addEventListener0(...args)\n      }\n    <\/script>\n  ")}({init:function(){if(f.init(),B(),C(),O.init(),M.init(),a.init(),R(),x(),A(),E(),r("/ig-injection/index.js"),!e.isIframe())return j.init(),y.init(),P.init(),void function(){if(!location.pathname.startsWith("/accounts/login/"))return;n("\n    <script>\n      Object.defineProperty(Object.prototype, 'isMobile', {\n        get () {\n          return () => true\n        },\n        set () {\n          return true\n        },\n      })\n    <\/script>\n  ")}();const t=e.isIframe("inssist-ig"),o=e.isIframe("inssist-dm");(t||o)&&(n("\n    <script>\n      const setTimeout = window.setTimeout.bind(window)\n      const setInterval = window.setInterval.bind(window)\n      const clearTimeout = window.clearTimeout.bind(window)\n      const clearInterval = window.clearInterval.bind(window)\n\n      Object.defineProperty(window, 'setTimeout', {\n        get: () => setTimeout,\n        set: () => true,\n      })\n      Object.defineProperty(window, 'setInterval', {\n        get: () => setInterval,\n        set: () => true,\n      })\n      Object.defineProperty(window, 'clearTimeout', {\n        get: () => clearTimeout,\n        set: () => true,\n      })\n      Object.defineProperty(window, 'clearInterval', {\n        get: () => clearInterval,\n        set: () => true,\n      })\n    <\/script>\n  "),n("\n    <script>\n      window.devicePixelRatio = 3\n    <\/script>\n  "),n("\n    <script>\n      document.write = function () {}\n    <\/script>\n  "),n("\n    <script>\n      Object.defineProperty(Object.prototype, 'getFrCookie', {\n        get: () => {\n          return () => {\n            return {\n              then () {\n                return {\n                  catch () {},\n                }\n              },\n            }\n          }\n        },\n        set: () => true,\n      })\n    <\/script>\n  "),n("\n    <script>\n      Object.defineProperty(Object.prototype, 'isDashEligible', {\n        get () {\n          return () => false\n        },\n        set () {\n          return true\n        }\n      })\n    <\/script>\n  "),j.init(),l(),p.init(),n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n      modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        if (!bodyStr.includes('window.top')) { return }\n        const newBodyStr = bodyStr.split('window.top').join('window')\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  "));t&&(n(`\n    <script>\n      ${k}\n    <\/script>\n  `),n("\n    <script>\n      Object.defineProperty(Object.prototype, 'getOrientationData', {\n        get () {\n          return () => {\n            return {\n              degreesToRotate: 0,\n              mirrored: false,\n            }\n          }\n        },\n        set () {\n          return true\n        },\n      })\n    <\/script>\n  "),n("\n    <script>\n      const modulePatcher = window.inssist.modulePatcher\n      modulePatcher.onModuleInit((bodyStr, setBodyStr) => {\n        const isPostComponent = (\n          bodyStr.includes('$Post1=') ||\n          bodyStr.includes('{currSidecarIndex:')\n        )\n        if (!isPostComponent) { return }\n        if (bodyStr.includes('const _postId')) { return }\n        const newBodyStr = bodyStr\n          .replace(\n            'render=function(){',\n            'render=function(){const _postId = this.props.post.id;'\n          )\n          .replace(\n            'onKeyUp',\n            '\"data-post-id\": typeof _postId === \"undefined\" ? -1 : _postId, onKeyUp'\n          )\n        setBodyStr(newBodyStr)\n      })\n    <\/script>\n  "),m.init());o&&s.init()}}).init()}();